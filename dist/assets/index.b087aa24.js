var B=Object.defineProperty,K=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var R=(r,n,t)=>n in r?B(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,w=(r,n)=>{for(var t in n||(n={}))G.call(n,t)&&R(r,t,n[t]);if(D)for(var t of D(n))Y.call(n,t)&&R(r,t,n[t]);return r},N=(r,n)=>K(r,V(n));import{j as F,r as y,R as J,a as Q}from"./vendor.13c4ddcf.js";const U=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}};U();var X="/dragon-game/assets/menu.8bb11d47.svg",Z="/dragon-game/assets/close.fb0e31e5.svg";const ee="_root_1y60b_1";var te={root:ee};const ne="_root_1oq6l_1",ae="_main_1oq6l_4",oe="_enemyHealth_1oq6l_12",re="_enemy_1oq6l_12",le="_challenge_1oq6l_33",ce="_info_1oq6l_46",se="_text_1oq6l_52";var v={root:ne,main:ae,enemyHealth:oe,enemy:re,challenge:le,info:ce,text:se};const e=F.exports.jsx,o=F.exports.jsxs;function ie(r){var l,h,u;let n=(l=r.light)!=null?l:"#ffffff",t=(h=r.dark)!=null?h:"#000000",c=(u=r.saturated)!=null?u:"#717171",a=[];for(let i=0;i<r.challenge;i++)a.push(i);return a.map(i=>o("svg",{version:"1.1",viewBox:"0 0 74 68.44",style:{enableBackground:"new 0 0 74 68.44"},children:[e("path",{fill:c,d:"M40.02,1.78c0,0-13.48,0.3-16,1.93s-0.3,2.37-5.93,2.37s-7.7,0-9.63,2.07s-1.78,2.07-1.78,8.59s0.3,8.3,1.78,9.48\r c1.48,1.19,2.07,1.78,0,4.15s-3.85,6.22-3.85,10.81s1.19,9.04,2.96,11.56c1.78,2.52,2.52,1.93,0.15,5.19s-6.81,9.04-6.81,9.04h28.44\r c12.34-0.15,27.75,0.08,32.15-3.11c6.02-4.37,8.74-8.15,10.37-15.56c1.63-7.41,1.48-18.37-8.59-22.22s-17.33-1.19-17.33-1.19\r s1.33-7.85,0.89-16.44h-6.81V1.78z"}),e("path",{fill:"#FFF",d:"M10.89,16.13c0,1.48,1.39,2.59,1.39,2.59v-1.3c0,0,0.28,1.41,1.44,2.19l0.22-1.44c0,0,0.56,1.06,2.28,1.44\r v-3.48H10.89z"}),e("path",{fill:t,d:"M34.11,12.11h8.67c0,0,0.22,2.11-0.28,3.22s-2.06,3.28-3.11,3.56h3.44c0,0,0.05,3.61,0,4.67\r c-0.05,1.06-5.88,9.15-10.05,9.88l-0.56-2.17l1.89-5.49l-3.56-7.33L30.83,15L34.11,12.11z"}),e("path",{fill:t,d:"M36.7,38.31c0.85-3.14,4.85-8.14,8.46-9.42c3.61-1.28,8.5-1.33,8.5-1.33v3.71c0,0,1.5-1.54,5.5-1.54\r s5.94,2,7,2.94c1.06,0.94,2.28,3.22,2.28,8.61s-1.07,7.28-3.06,9.33c-1.99,2.06-3.22-6.72-3.22-6.72l-12-6.56l-10.83,1.91\r L36.7,38.31z"}),e("path",{fill:n,d:"M14,52c0.96,0.81,2.52,2.52,1.63,3.48c-0.89,0.96-3.74,3.11-4.98,5.26h12.46c0,0,0.3-1.63,2.59-3.33\r c2.3-1.7,5.61-3.08,7.07-3.68c1.46-0.6,0-5.58,0-5.58l-14.41-0.52L14,52z"}),e("path",{fill:t,d:"M23.56,21.78c-0.44,3.78-3.89,6.67-9,8.56C9.44,32.22,6.78,40.22,10,47.44s7.22,8.11,10.11,8.67\r C23,56.67,33.78,54,35.33,52.44c1.56-1.56,0-7,0-7l-13.02,1.78L18,41.78l5.56-6.67c0,0,9.56-5.56,9.78-6\r c0.22-0.44-2.56-7.33-2.56-7.33H23.56z"}),e("path",{fill:n,d:"M58.22,36c-10.44-5.22-21.56,2.33-24.78,4.22c-3.22,1.89-11.44,7.44-11.89,4c-0.44-3.44,2-5.89,7.89-8.67\r c5.89-2.78,6.89-6.78,6.56-12.22s-2.56-6.56-3.78-7.67c2.44-1.11,3.33-2.89,3.44-5.33c0,0-17,0-18,1s-3.11,1-3.11,0\r s-4.22-1.67-3.89,2.44c0,2.33,0.11,2.89,1.33,2.89s4.89-0.33,6.22,1.44c1.33,1.78,2.11,3.22-0.11,3.22s-7.46,0-7.46,0\r s0.13,2.89,3.69,2.89s15.22,0,15.22,0s-0.22,4.76-4.56,7.04c-4.33,2.29-11.78,3.96-10.22,12.18s9.56,7.78,17,7.89\r c0,0,1.11,3.22-2.78,6c-3.89,2.78-4.56,5.22-4.56,5.22h11.78c0,0,3.67-3.44,4-4.56c0.33-1.11-1.78-8.44,0-9.44s4.67-3.56,9.22-3.44\r c0,0-1.11,2.56-3.89,4.44c-2.78,1.89-4.11,4.67-4.11,4.67l11.78,0.11c0,0,0-1.67,1.33-3c0,2.67-0.22,5.44-3.89,6.22\r c-3.67,0.78-6.22,0.67-9.78,5c0,0,14.56,2.11,20.11-3.22S68.67,41.22,58.22,36z M22.78,15.78c0,0.89-0.72,1.61-1.61,1.61\r c-0.89,0-1.61-0.72-1.61-1.61v-1.56c0-0.89,0.72-1.61,1.61-1.61c0.89,0,1.61,0.72,1.61,1.61V15.78z"}),e("path",{fill:t,d:"M18.52,57.17v3.57h-3.33c0,0,0.89-1.46,1.33-2.07S18.52,57.17,18.52,57.17z"}),e("path",{fill:t,d:"M23.06,57.17v3.57h-3.33c0,0,0.89-1.46,1.33-2.07S23.06,57.17,23.06,57.17z"}),e("path",{fill:t,d:"M13.98,57.17v3.57h-3.33c0,0,0.89-1.46,1.33-2.07C12.43,58.06,13.98,57.17,13.98,57.17z"}),e("path",{fill:t,d:"M31.9,58.95v3.57h-3.33c0,0,0.89-1.46,1.33-2.07S31.9,58.95,31.9,58.95z"}),e("path",{fill:t,d:"M36.11,58.95v3.57h-3.33c0,0,0.89-1.46,1.33-2.07C34.56,59.84,36.11,58.95,36.11,58.95z"}),e("path",{fill:t,d:"M27.7,58.95v3.57h-3.33c0,0,0.89-1.46,1.33-2.07C26.14,59.84,27.7,58.95,27.7,58.95z"}),e("path",{fill:t,d:"M49,50.61v3.57h-3.33c0,0,0.89-1.46,1.33-2.07S49,50.61,49,50.61z"}),e("path",{fill:t,d:"M53.21,50.61v3.57h-3.33c0,0,0.89-1.46,1.33-2.07C51.65,51.5,53.21,50.61,53.21,50.61z"}),e("path",{fill:t,d:"M44.79,50.61v3.57h-3.33c0,0,0.89-1.46,1.33-2.07C43.24,51.5,44.79,50.61,44.79,50.61z"}),e("path",{fill:t,d:"M23.94,13.61c0,0-0.44-4.06,1.78-5.78S30,5.94,32.78,5.94s3.78,0.22,2.83,1.5c-0.94,1.28-2,1.5-4.11,1.61\r c-2.11,0.11-2.72,0.78-2.56,2.11S28.61,13.61,23.94,13.61z"})]},i))}const he="_root_d7rr7_1",de="_action_d7rr7_9";var P={root:he,action:de};function me(r){let n=r.actions;return e("div",{className:P.root,children:n.map(t=>{var a,l;let c=t.damage[0];return o("div",{className:P.action,children:[e("p",{children:t.name}),o("p",{children:["Attack bonus: +",t.attack_bonus]}),o("p",{children:["Damage: ",(a=c.damage_dice)!=null?a:""," ",(l=c.damage_type.name)!=null?l:{}]})]},t.name)})})}function pe(r){const{name:n,alignment:t,armor:c,health:a,maxhp:l,actions:h,challenge:u}=r.enemy,i=r.loading;return e("div",{className:v.root,children:o("div",{className:v.main,children:[o("div",{className:v.enemyHealth,children:[o("label",{htmlFor:"enemy-hp",children:["HP: ",a]}),o("meter",{id:"enemy-hp",min:"0",max:l,optimum:l,high:Math.floor(l*(2/3)),low:Math.floor(l*(1/3)),value:a,children:[a,"/100"]})]}),o("div",{className:v.enemy,children:[e("div",{className:v.challenge,children:e(ie,{challenge:u,saturated:"#771313"})}),o("div",{className:v.info,children:[o("div",{className:v.text,children:[e("h2",{children:i?"Getting you an enemy!":n}),o("p",{children:["Alignment: ",t," * Armor class: ",c]})]}),e(me,{actions:h})]})]})]})})}const fe="_root_1bhvn_1",ue="_fighting_1bhvn_22",ge="_stats_1bhvn_34",ye="_selected_1bhvn_56",_e="_weapons_1bhvn_72",ve="_armory_1bhvn_79";var b={root:fe,fighting:ue,stats:ge,selected:ye,weapons:_e,armory:ve};const Me="_root_1qbo7_1";var ke={root:Me};function xe(r){const{weapon:n,attack:t,setter:c}=r,[a,l]=y.exports.useState(!1);function h(i){c(p=>N(w({},p),{rightHand:i}))}function u(i){c(p=>N(w({},p),{leftHand:i}))}return o("div",{className:ke.root,onClick:()=>l(i=>!i),children:[e("p",{children:n.name}),o("p",{children:["Attack: +",t]}),o("p",{children:["Damage: ",n.dice," ",n.type]}),o("p",{children:["Category: ",n.category]}),a?o("div",{children:[e("button",{onClick:()=>u(n),children:"Left"}),e("button",{onClick:()=>h(n),children:"Right"})]}):""]})}const be="_root_8uvgi_1";var we={root:be};function L(r){const{weapon:n,attack:t,attackfn:c,empty:a}=r;return o("div",{className:we.root,children:[e("h3",{children:a?"Select a Weapon!":n.name}),o("p",{children:["Attack: +",t,e("br",{}),"Damage: ",a?"":n.dice," ",a?"":n.type]}),a?"":e("button",{onClick:()=>c(t,n.dice,n.type),children:"ATTACK!"})]})}function Ne(r){const{setter:n,setEnemy:t,enemy:c,getEnemy:a}=r,{health:l,level:h,armor:u,weapons:i,maxhp:p,strength:m,proficiencies:s,rightHand:M,leftHand:k}=r.player,[f,d]=y.exports.useState(!1),[S,x]=y.exports.useState([]),[O,E]=y.exports.useState();y.exports.useState([]);function A(_,g,j){console.log("attack!",j),d(!0);let $=g.match(/^\d+/)[0],I=g.match(/\d+$/)[0];setTimeout(()=>{let z=T(_);x(z),console.log("attack roll: ",z),z[0]>=c.armor&&setTimeout(()=>{let C=W($,I,z[1]);E(C),console.log("damage: ",C),c.health-C>0?t(q=>N(w({},q),{health:q.health-C})):console.log("DEAD ENEMY"),setTimeout(()=>{x(0),E(),d(!1)},3500)},1e3),setTimeout(()=>{x(0),d(!1)},3500)},1e3)}function T(_){let g=Math.floor(Math.random()*20)+1;return g==20?[g+_,"crit"]:[g+_,""]}function W(_,g,j){let $=_*Math.floor(Math.random()*g)+1;switch(j){case"crit":return $*2;default:return $}}return o("div",{className:b.root,children:[f?o("div",{className:b.fighting,children:[o("p",{children:["Attack Roll: ",S||""]}),o("p",{children:["Damage: ",O]})]}):"",o("div",{className:b.selected,children:[e("h2",{children:"Selected Weapons"}),o("div",{className:b.weapons,children:[Object.keys(k).length==0?e(L,{empty:!0,attackfn:A,attack:m}):e(L,{weapon:k,attackfn:A,attack:m}),Object.keys(M).length==0?e(L,{empty:!0,attackfn:A,attack:m}):e(L,{weapon:M,attackfn:A,attack:m})]})]}),e("div",{className:b.armory,children:i.map((_,g)=>e(xe,{weapon:_,attack:m,setter:n},_+g))}),o("div",{className:b.stats,children:[o("div",{children:[o("p",{children:["Level: ",h]}),o("p",{children:["Armor Class: ",u]}),o("p",{children:["Strength: +",m]})]}),o("p",{children:["Proficiencies:",e("br",{})," ",s.join(", ")]})]}),o("label",{htmlFor:"player-hp",children:["HP ",p]}),o("meter",{id:"player-hp",min:"0",max:p,optimum:p,high:Math.floor(p*(2/3)),low:Math.floor(p*(1/3)),value:l,children:[l,"/100"]})]})}const H="https://www.dnd5eapi.co";function Se(r){const[n,t]=y.exports.useState(!1),[c,a]=y.exports.useState({name:"",alignment:"",armor:10,health:10,maxhp:10,actions:[],challenge:1}),[l,h]=y.exports.useState({level:1,weapons:[],defense:[],rightHand:{},leftHand:{},health:15,maxhp:15,armor:10,strength:2,proficiencies:["Simple Weapons","Light Armor","Shields"]});y.exports.useEffect(()=>{p(.25),i("simple-weapons")},[]);function u(m){h(s=>N(w({},s),{weapons:[...s.weapons,m]}))}function i(m="weapon"){try{fetch(`${H}/api/equipment-categories/${m}`).then(s=>s.json()).then(s=>{let M=Math.floor(Math.random()*s.equipment.length),k=s.equipment[M].url;fetch(`${H}${k}`).then(f=>f.json()).then(f=>{let d={name:f.name,dice:f.damage.damage_dice,type:f.damage.damage_type.name,category:f.weapon_category,properties:f.properties};u(d)})})}catch(s){console.log(s)}}function p(m=1){t(!0);try{fetch(`${H}/api/monsters?challenge_rating=${m}`).then(s=>s.json()).then(s=>{let M=s.count,k=Math.floor(Math.random()*M),f=s.results[k].url;fetch(`${H}${f}`).then(d=>d.json()).then(d=>{let S=d.actions.filter(x=>{if(x.damage.length>0)return x});a({name:d.name,alignment:d.alignment,armor:d.armor_class,health:d.hit_points,maxhp:d.hit_points,actions:S,challenge:m}),t(!1)})})}catch(s){console.log(s)}}return o("section",{className:te.root,children:[e(pe,{enemy:c,loading:n}),e(Ne,{player:l,enemy:c,setter:h,setEnemy:a,getEnemy:p})]})}function Ae(r){return e("div",{children:e("p",{children:"Thanks for playing!"})})}function $e(){const[r,n]=y.exports.useState(!1);return o("div",{className:"App",children:[o("header",{children:[e("h1",{children:"play some DND!"}),e("img",{src:r?Z:X,alt:"Menu Icon",id:"menu-toggle",width:"50px",onClick:()=>n(t=>!t)})]}),r?e(Ae,{}):"",e(Se,{})]})}J.render(e(Q.StrictMode,{children:e($e,{})}),document.getElementById("root"));
